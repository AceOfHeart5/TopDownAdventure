I have no idea what to do with this game, so we're just going to add stuff until something feels right. For no reason in particular, I want change the attack so that it's a regular melee attack with a quick button press, and a chargeable projectile attack if you hold the button. Now, creating hitboxes that behave the way we want is not hard. But how to we make the system easy to make with different animations? Is there an easy way? How to we get an animation to sync up with different hitboxes and still have it modular? 

Consider what we did for hitboxes. We could have a list that we can add frames to. This will manually update the hitbox animation depending on the data we put in the list. If we setup the attack animation the same way, manually updated by us, we can pick what sprites are visible when. And this data is disconnected from the hitbox data. We could add variables such as hitbox_frame_create to determine when in the animation the hitbox is created, and the hitbox code can take over from there. 

However, we want to be able to change what happens depending on how long the player holds the button. If we're just worrying about hitboxes, all we need to do is check if the attack button has been released, and use a state variable with enums to determine where to go. that system isn't modular, but it's so easy to re-code for different situations it wouldn't bother me. The real problem is the animation. How to we get an animation to change mid-attack? I suppose we could just draw two different animations, with each having a different end. 

However, we must acknowledge that for this game, we're probably never going to bother with more than the cast animation we've already created for our wizard character. And the other elements of the animation will actually just be magic swooshes or little fireballs appearing. Given that, perhaps we should make a system where we can create fx sprites that are animated manually. We actually should probably just make a new object type for this, and this new object allow for manual animation like our current hitboxes. 

Let's flesh out this new animation object. That will allow us to think out our melee/charge-to-projectile attack more clearly. Let's consider that this object is a game maker object with the following: a sprite, a draw event with an image speed set to 0, a variable that keeps track of displayed frames, a ds_list of frame data, an index for the sprite displayed, and an index for the frames display of a sprite. This object will NOT automatically update itself. We will make a script that advances the indexes correctly. If we do that, we may not actually need the frames displayed variable. That's something to think about.

So, let's think now about or melee/projectile. In a regular melee attack, we could define a state with an animation object, a hitbox object, and a variable that determines when the hitbox appears. BUT, if we want to be able to change it halfway through, we could have a second set of those variables for the second animation, hitbox, and hitbox appearance frame. In our attack state object, when we decide that we are no longer going to do the first animation/hitbox, and we're going to do the second, we could delete the first animation object and create the second. Whatever state/enumerator system we're using to step through the attack logic, we could jump ahead to a different path once we've decided to do something different. 